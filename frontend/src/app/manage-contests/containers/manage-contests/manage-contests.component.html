<div class="container_main">
    <div class="row">
        <div class="col-md-3">
            <app-manage-navbar></app-manage-navbar>
        </div>
        <div class="col-md-9">
            <h2 class="pt-1 pb-3">Управление олимпиадами</h2>
            <ng-container *ngIf="contests$ | async as contests">

                <dx-data-grid [dataSource]="contests"
                              width="100%"
                              [showColumnLines]="false"
                              [showRowLines]="true"
                              [showBorders]="true"
                              [columnAutoWidth]="true"
                              (onSelectionChanged)="selectedChanged($event)">
                    <dxi-column dataField="contest.contest_id"></dxi-column>
                    <dxi-column dataField="contest.start_date" dataType="date"></dxi-column>
                    <dxi-column dataField="contest.end_date" dataType="date"></dxi-column>
                    <dxi-column dataField="contest.start_date" dataType="date"></dxi-column>
                    <dxi-column dataField="contest.end_of_enroll_date" dataType="date"></dxi-column>
                    <dxi-column dataField="contest.result_publication_date" dataType="date"></dxi-column>
                    <dxi-column dataField="contest.previous_contest_id"></dxi-column>
                    <dxi-column dataField="contest.contest_duration"></dxi-column>
                    <dxi-column dataField="contest.regulations"></dxi-column>
                    <dxi-column dataField="contest.tasks_number"></dxi-column>
                    <dxi-column dataField="contest.total_points"></dxi-column>
                    <dxi-column dataField="contest.holding_type"></dxi-column>
                    <!--TODO enum SimpleContest.HoldingTypeEnum-->
                    <dxi-column dataField="contest.status"></dxi-column> <!--TODO enum SimpleContest.StatusEnum-->
                    <dxi-column dataField="contest.target_classes"></dxi-column> <!--TODO Array<TargetClass>-->
                    <dxi-column dataField="contest.previous_participation_condition"></dxi-column>
                    <!--TODO enum SimpleContest.PreviousParticipationConditionEnum-->
                    <dxi-column dataField="contest.locations"></dxi-column> <!--TODO enum Array<OlympiadLocation>-->

                    <dxi-column dataField="contest.base_contest.base_contest_id"></dxi-column>
                    <dxi-column dataField="contest.base_contest.name"></dxi-column>
                    <dxi-column dataField="contest.base_contest.description"></dxi-column>
                    <dxi-column dataField="contest.base_contest.diploma_1_condition"></dxi-column>
                    <dxi-column dataField="contest.base_contest.diploma_2_condition"></dxi-column>
                    <dxi-column dataField="contest.base_contest.diploma_3_condition"></dxi-column>
                    <dxi-column dataField="contest.base_contest.diploma_3_condition"></dxi-column>
                    <dxi-column dataField="contest.base_contest.level"></dxi-column>
                    <!---TODO enum BaseContest.LevelEnum--->
                    <dxi-column dataField="contest.base_contest.olympiad_type_id"></dxi-column>
                    <dxi-column dataField="contest.base_contest.rules"></dxi-column>
                    <dxi-column dataField="contest.base_contest.subject"></dxi-column>
                    <!---TODO enum BaseContest.SubjectEnum--->
                    <dxi-column dataField="contest.base_contest.target_classes"></dxi-column>
                    <!---TODO Array<TargetClass>--->
                    <dxi-column dataField="contest.base_contest.winner_1_condition"></dxi-column>
                    <dxi-column dataField="contest.base_contest.winner_2_condition"></dxi-column>
                    <dxi-column dataField="contest.base_contest.winner_3_condition"></dxi-column>
                    <dxi-column type="buttons">
                        <dxi-button></dxi-button>
                    </dxi-column>

                    <dxo-selection mode="single"></dxo-selection>
                    <dxo-grouping [autoExpandAll]="false" [contextMenuEnabled]="true"></dxo-grouping>
                    <dxo-group-panel [visible]="true"></dxo-group-panel>

                    <dxo-scrolling mode="standard" [useNative]="true"></dxo-scrolling>
                    <dxo-column-chooser [enabled]="true"></dxo-column-chooser>
                    <dxo-search-panel [visible]="true" [highlightCaseSensitive]="true"></dxo-search-panel>
                    <dxo-editing mode="popup">
                        <dxo-texts confirmDeleteMessage=""></dxo-texts>
                    </dxo-editing>

                    <dxo-export [enabled]="true"></dxo-export>
                    <dxo-paging [pageSize]="25"></dxo-paging>
                    <dxo-pager [showPageSizeSelector]="true" [allowedPageSizes]="[25, 50, 100]"></dxo-pager>
                    <dxo-state-storing [enabled]="true" type="localStorage"
                                       storageKey="app-manage-contests"></dxo-state-storing>
                </dx-data-grid>


                <dx-speed-dial-action
                    icon="add"
                    label="Add row"
                    [index]="1"
                    (onClick)="addRow()">
                </dx-speed-dial-action>
                <dx-speed-dial-action
                    icon="trash"
                    label="Delete row"
                    [index]="2"
                    [visible]="selectedRowIndex !== -1"
                    (onClick)="deleteRow()">
                </dx-speed-dial-action>
                <dx-speed-dial-action
                    icon="edit"
                    label="Edit row"
                    [index]="3"
                    [visible]="selectedRowIndex !== -1"
                    (onClick)="editRow()">
                </dx-speed-dial-action>
            </ng-container>
        </div>
    </div>
</div>