<ng-container *ngIf="contest$ | async as contest">
    <div class="container">
        <div class="row">
            <div class="col-md-4">
                <div class="olymp_title_container">

                    <div class="olymp_title">
                        {{ contest.base_contest?.name }}
                    </div>

                    <div class="olymp_subtitle pb-2">
                        Просьба внимательно ознакомиться с регламентом олимпиады перед началом прохождения
                    </div>

                    <ng-container *ngIf="contestStatus$ | async as contestStatus; else startButton">

                        <div class="pt-5 pb-5">
                            <div class="olymp_status">
                                <span>{{ getUserResponseStatusDisplay(contestStatus) }}</span>
                            </div>
                        </div>

                        <div class="olymp_start">
                            <div *ngIf="inProgress(contestStatus)">
                                <button (click)="onContinueClick(contest.contest_id)">Продолжить олимпиаду</button>
                            </div>
                            <div *ngIf="accepted(contestStatus)">
                                <button (click)="onShowResultsClick(contest.contest_id)">Показать результаты</button>
                            </div>
                        </div>
                    </ng-container>

                    <ng-template #startButton>
                        <div class="olymp_start">
                            <button (click)="onStartClick(contest.contest_id)">Начать олимпиаду</button>
                        </div>
                    </ng-template>

                </div>
            </div>
            <div class="col-md-8">
                <div class="olymp_rules">
                    <div class="row">
                        <div class="col-md-4">
                            <svg width="97" height="96" viewBox="0 0 97 96" fill="none"
                                 xmlns="http://www.w3.org/2000/svg">
                                <path
                                    d="M53.5 56H43.5C42.9696 56 42.4609 56.2107 42.0858 56.5858C41.7107 56.9609 41.5 57.4696 41.5 58V60C41.5 60.5304 41.7107 61.0391 42.0858 61.4142C42.4609 61.7893 42.9696 62 43.5 62H53.5C54.0304 62 54.5391 61.7893 54.9142 61.4142C55.2893 61.0391 55.5 60.5304 55.5 60V58C55.5 57.4696 55.2893 56.9609 54.9142 56.5858C54.5391 56.2107 54.0304 56 53.5 56ZM53.5 60H43.5V58H53.5V60Z"
                                    fill="black"/>
                                <path
                                    d="M61.2068 46.293L49.2068 34.293C49.114 34.2001 49.0038 34.1264 48.8824 34.0761C48.7611 34.0258 48.6311 34 48.4998 34C48.3685 34 48.2384 34.0258 48.1171 34.0761C47.9958 34.1264 47.8856 34.2001 47.7928 34.293L35.7928 46.293C35.653 46.4329 35.5578 46.611 35.5192 46.805C35.4806 46.9989 35.5004 47.2 35.5761 47.3827C35.6518 47.5654 35.7799 47.7215 35.9443 47.8314C36.1087 47.9413 36.302 48 36.4998 48H41.4998V52C41.5004 52.5303 41.7113 53.0386 42.0862 53.4135C42.4612 53.7885 42.9695 53.9994 43.4998 54H53.4998C54.03 53.9993 54.5383 53.7884 54.9132 53.4134C55.2881 53.0385 55.4991 52.5302 55.4998 52V48H60.4998C60.6975 48 60.8908 47.9413 61.0552 47.8314C61.2197 47.7215 61.3478 47.5654 61.4235 47.3827C61.4991 47.2 61.5189 46.9989 61.4804 46.805C61.4418 46.611 61.3466 46.4329 61.2068 46.293ZM53.4998 46V52H43.4998V46H38.9139L48.4998 36.4141L58.0857 46H53.4998Z"
                                    fill="black"/>
                                <rect x="1.5" y="1" width="94" height="94" rx="47" stroke="#171717"
                                      stroke-width="2"/>
                            </svg>
                            <br/>
                            <span class="icon_title">
                            {{ contest.total_points }} баллов
                        </span>
                        </div>
                        <div class="col-md-4">
                            <svg width="96" height="96" viewBox="0 0 96 96" fill="none"
                                 xmlns="http://www.w3.org/2000/svg">
                                <path
                                    d="M62 52C62.002 50.9986 61.7534 50.0127 61.2768 49.1321C60.8002 48.2514 60.1107 47.5041 59.2713 46.9581C58.4319 46.4121 57.4692 46.085 56.4709 46.0064C55.4726 45.9278 54.4706 46.1003 53.5561 46.5082C52.6415 46.916 51.8436 47.5463 51.2351 48.3415C50.6266 49.1368 50.2267 50.0716 50.072 51.061C49.9173 52.0503 50.0127 53.0626 50.3495 54.0056C50.6862 54.9487 51.2536 55.7924 52 56.46V64L56 62.1064L60 64V56.46C60.6287 55.8994 61.1318 55.2123 61.4765 54.4437C61.8211 53.6751 61.9995 52.8423 62 52ZM58 60.84L56 59.8933L54 60.84V57.65C55.2925 58.1168 56.7075 58.1168 58 57.65V60.84ZM56 56C55.2089 56 54.4355 55.7654 53.7777 55.3259C53.1199 54.8863 52.6072 54.2616 52.3045 53.5307C52.0017 52.7998 51.9225 51.9956 52.0768 51.2196C52.2312 50.4437 52.6122 49.731 53.1716 49.1716C53.731 48.6122 54.4437 48.2312 55.2196 48.0769C55.9956 47.9225 56.7998 48.0017 57.5307 48.3045C58.2616 48.6072 58.8863 49.1199 59.3259 49.7777C59.7654 50.4355 60 51.2089 60 52C59.9988 53.0605 59.577 54.0772 58.8271 54.8271C58.0772 55.577 57.0605 55.9988 56 56Z"
                                    fill="black"/>
                                <path
                                    d="M57 37H54V36C53.9985 35.47 53.7873 34.9622 53.4125 34.5875C53.0378 34.2127 52.53 34.0015 52 34H44C43.47 34.0015 42.9622 34.2127 42.5875 34.5875C42.2127 34.9622 42.0015 35.47 42 36V37H39C38.47 37.0015 37.9622 37.2127 37.5875 37.5875C37.2127 37.9622 37.0015 38.47 37 39V60C37.0015 60.53 37.2127 61.0378 37.5875 61.4125C37.9622 61.7873 38.47 61.9985 39 62H48V60H39V39H42V42H54V39H57V44H59V39C58.9985 38.47 58.7873 37.9622 58.4125 37.5875C58.0378 37.2127 57.53 37.0015 57 37ZM52 40H44V36H52V40Z"
                                    fill="black"/>
                                <rect x="1" y="1" width="94" height="94" rx="47" stroke="#171717" stroke-width="2"/>
                            </svg>
                            <br/>
                            <span class="icon_title">
                            {{ contest.tasks_number }} заданий
                        </span>
                        </div>
                        <div class="col-md-4">
                            <svg width="96" height="96" viewBox="0 0 96 96" fill="none"
                                 xmlns="http://www.w3.org/2000/svg">
                                <path d="M49 43H47V52H49V43Z" fill="black"/>
                                <path d="M51 34H45V36H51V34Z" fill="black"/>
                                <path
                                    d="M59.9994 41L58.5794 39.59L56.3294 41.84C54.4877 39.713 51.8972 38.3774 49.0963 38.1107C46.2954 37.844 43.4994 38.6666 41.2892 40.4077C39.0791 42.1488 37.6247 44.6745 37.2283 47.46C36.8319 50.2456 37.5239 53.0767 39.1606 55.3653C40.7972 57.6538 43.2527 59.2239 46.0168 59.7491C48.781 60.2744 51.6412 59.7145 54.0032 58.1858C56.3653 56.6571 58.0475 54.2771 58.7005 51.5403C59.3535 48.8036 58.9269 45.9204 57.5094 43.49L59.9994 41ZM47.9995 58C46.2194 58 44.4794 57.4722 42.9993 56.4832C41.5193 55.4943 40.3657 54.0887 39.6845 52.4441C39.0033 50.7996 38.8251 48.99 39.1724 47.2442C39.5197 45.4983 40.3768 43.8947 41.6355 42.636C42.8942 41.3774 44.4978 40.5202 46.2436 40.1729C47.9895 39.8257 49.7991 40.0039 51.4436 40.6851C53.0881 41.3663 54.4937 42.5198 55.4827 43.9999C56.4716 45.4799 56.9994 47.22 56.9994 49C56.9994 51.3869 56.0512 53.6761 54.3634 55.364C52.6756 57.0518 50.3864 58 47.9995 58Z"
                                    fill="black"/>
                                <rect x="1" y="1" width="94" height="94" rx="47" stroke="#171717" stroke-width="2"/>
                            </svg>
                            <br/>
                            <span class="icon_title">
                            {{ ( contest.contest_duration ?? 0 ) / 60 }} минут
                        </span>
                        </div>
                    </div>
                    <div class="rules_text">
                        <pre>
                            {{ contest.base_contest?.rules }}
                        </pre>
                    </div>
                </div>
            </div>
        </div>
    </div>
</ng-container>
